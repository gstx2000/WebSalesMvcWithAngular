<form class="searchForm" [formGroup]="searchForm">

  <mat-form-field class="category" appearance="outline">
    <mat-label for="categories$">Categoria</mat-label>
    <mat-select formControlName="category">
      <mat-option *ngFor="let category of categories$ | async" [value]="category.id">{{ category.name }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline" class="search-input">
    <div class="search">
      <input matInput
             appearance="outline"
             [matAutocomplete]="auto"
             type="text"
             [formControl]="searchControl"
             placeholder="Buscar produto por nome">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let product of filteredProducts" [value]="product.name" (click)="selectProduct(product)">
          {{ product.name }}
        </mat-option>
      </mat-autocomplete>
    </div>
  </mat-form-field>

  <button mat-raised-button (click)="resetFilter()" class="btn btn-default">Redefinir</button>

</form>

<h2>Detalhes do produto {{ selectedProduct?.name }}</h2>
<tbody>
  <tr>
    <td>
      ID: {{ selectedProduct?.id }}<br>
      Preço: {{ selectedProduct?.price | currency:'BRL':'symbol':'1.2-2' }}<br>
      Descrição: {{ selectedProduct?.description }}<br>
      Categoria: {{ selectedProduct?.categoryName }}<br>
      Loja: {{ selectedProduct?.departmentName }}<br>
      Custo médio de estoque: {{ selectedProduct?.inventoryCost | currency:'BRL':'symbol':'1.2-2' }}<br>
      Valor total de estoque: {{ selectedProduct?.totalInventoryValue | currency:'BRL':'symbol':'1.2-2' }}<br>
      Custo total de estoque: {{ selectedProduct?.totalInventoryCost | currency:'BRL':'symbol':'1.2-2' }}<br>
      Custo de aquisição: {{ selectedProduct?.acquisitionCost | currency:'BRL':'symbol':'1.2-2' }}<br>
      Unidade de medida de estoque: {{ getUnitMeasName(selectedProduct?.inventoryUnitMeas)}}<br>
    </td>
  </tr>
</tbody>

<div>
  <form class="formedit" method="post" asp-controller="ProductsController" asp-action="Edit" asp-antiforgery="true" [formGroup]="productForm" (ngSubmit)="onSubmit()">

    *Se não houver unidade de medida cadastrada, a unidade padrão será unidade.
    <br />
    <br />

    <mat-form-field appearance="outline">
      <mat-label for="inventoryQuantity">Realizar entrada de produto no estoque</mat-label>
      <input matInput type="number" id="inventoryQuantity" formControlName="inventoryQuantity">
    </mat-form-field>
    <br />

    <mat-form-field appearance="outline">
      <mat-label for="acquisitionCost">Custo de aquisição</mat-label>
      <input matInput type="number" id="acquisitionCost" formControlName="acquisitionCost">
      <span matTextPrefix>$&nbsp;</span>
    </mat-form-field>

    <br />
    <mat-form-field appearance="outline">
      <mat-label for="minimumInventoryQuantity">Valor mínimo de estoque</mat-label>
      <input matInput type="number" id="minimumInventoryQuantity" formControlName="minimumInventoryQuantity">
    </mat-form-field>

    <br />
    <button mat-raised-button [disabled]="productForm.invalid" type="submit">Salvar</button>
    <button mat-raised-button class="btn btn-default" [routerLink]="['/products']">Cancelar</button>
  </form>
</div>
